# コードレビューのポイント
## 主なコードレビュー観点
### 可読性
他の人がそのコードを読んで、処理を理解できるような実装になっていることを確認する。  

|チェックポイント|内容|
|:---|:---|
|変数やメソッドの命名が適切か|意図を明確に表した命名であること|
|簡潔なコードになっているか|ループやif文のネストなどが過剰になっていないこと<br />冗長なロジックになっていないこと|
|マジックナンバーが使われていないか|-|
|関数やクラスが適切に分割されているか|1つの関数やクラスが大きくなりすぎていないこと|
|エラーメッセージの内容が明確になっているか|具体的なエラーメッセージで、問題の原因を特定しやすいものになっていること<br />開発者やユーザにとって理解しやすい言葉で書かれていること|
|条件式が分かりやすいものになっているか|複雑な条件式になっていないこと<br />複雑な場合は、関数や変数に分割して意図が明確に分かるようにする|
|〃|否定形(!)が多様されていないこと<br />できるだけ肯定形を使用する|
|〃|マジックナンバーやマジック文字列が条件式に含まれていないこと|
|テストコードが分かりやすい内容になっているか|テストケースが意図を明確に表していること<br />テストメソッド名やコメントが分かりやすいものになっていること|

### 仕様の遵守
要求仕様や設計に従った実装になっていることを確認する。

|チェックポイント|内容|
|:---|:---|
|仕様書や設計書に記載された要件を満たしているか|-|
|仕様にない動作や処理が含まれていないか|-|

### 保守性
将来的な仕様変更や拡張に対応しやすいコードになっているかを確認する。

|チェックポイント|内容|
|:---|:---|
|冗長なコードや重複がないか|DRY原則(Don't Repeat Yourself)|
|関数やクラスが単一責任を持っているか|-|
|ハードコーディングが避けられているか|設定値や定数が適切に管理されていること|

### エラーハンドリング
適切なエラーハンドリングが実装されているかを確認する。

|チェックポイント|内容|
|:---|:---|
|例外が適切にキャッチされているか|例外が適切にキャッチされ、必要に応じてログや通知が行われていること|
|エラー時のレスポンスが適切か|APIの場合、エラー時に適切なHTTPステータスコードとエラーメッセージが返されていること|
|エラーがユーザーに分かりやすく伝えられているか|ユーザー向けのエラーメッセージが簡潔で分かりやすい内容になっていること|
|エラーがシステムに影響を与えないようになっているか|エラーが発生してもシステム全体に影響を与えないように設計されていること|
|エラーの再現性が確保されているか|エラーの原因を特定しやすいように、十分な情報がログに記録されていること|

### 設計の観点
設計が適切であるかを確認する。

|チェックポイント|内容|
|:---|:---|
|DDD(ドメイン駆動開発)の観点から適切か|ドメインロジックが適切に分離されているか、エンティティや値オブジェクトが正しく設計されているか|
|一般的なコーディングの原則に沿っているか|SOLID原則やDRY原則に従っているか、アンチパターンを避けているか|
|Laravelのベストプラクティスに従っているか|Laravelの標準的な機能を活用し、フレームワークの特性を活かした設計になっているか|
|SQLやデータベース設計が効率的かつ安全か|インデックスや正規化が適切に行われているか、SQLインジェクションのリスクがないか|
|API設計がRESTfulであるか|適切なHTTPメソッドやステータスコードを使用しているか、リソース指向の設計になっているか|
|セキュリティ上の懸念がないか|XSSやCSRF、SQLインジェクションなどの脆弱性がないか|
|テストコードが十分にカバレッジを持ち、信頼性が高いか|ユニットテストや統合テストが適切に実装されているか、テストケースが網羅的であるか|

#### DDD(ドメイン駆動開発)の観点から適切か
- エンティティと値オブジェクトが正しく設計されているか
  - エンティティは一意の識別子を持ち、値オブジェクトは不変であることを確認する。
- ドメインサービスが適切に分離されているか
  - ビジネスロジックがエンティティや値オブジェクトに属さない場合、ドメインサービスとして分離されているか。
- リポジトリパターンが適切に実装されているか
  - データアクセスロジックがリポジトリに集約され、ドメイン層がインフラ層に依存していないか。
- ユビキタス言語がコードに反映されているか
  - ドメインエキスパートと共有した用語がクラス名やメソッド名に反映されているか。
- 集約の境界が適切に定義されているか
  - 集約内のエンティティや値オブジェクトが一貫性を保つように設計されているか。

#### 一般的なコーディングの原則に沿っているか
- 単一責任の原則(SRP)に従っているか
  - クラスやメソッドが1つの責任のみを持つように設計されているか。
- オープン/クローズドの原則(OCP)に従っているか
  - 既存のコードを変更せずに拡張できる設計になっているか。
- リスコフの置換原則(LSP)に従っているか
  - 派生クラスが基底クラスの代わりとして問題なく機能するか。
- インターフェース分離の原則(ISP)に従っているか
  - クライアントが使用しないメソッドに依存していないか。
- 依存関係逆転の原則(DIP)に従っているか
  - 高レベルモジュールが低レベルモジュールに依存せず、抽象に依存しているか。

## コードレビューで意識するべきこと
### 建設的なフィードバックをする
批判的なコメントではなく、改善案を提案する形でコメントする。  

### 優先順位をつける
すぐに修正が必要な問題(バグや仕様違反)と、改善が望ましい点(可読性や保守性)を区別する。  

### 個人的な意見はコメントしない
コメントは、できるだけ「修正するべきポイント」に関する内容にする。  
修正対応する時間に対して得られる価値が少ないような内容の場合は、あえてコメントしない、という選択を取ることもある。  


